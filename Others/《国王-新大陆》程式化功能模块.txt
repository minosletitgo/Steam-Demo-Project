
https://gl.ali213.net/html/2016-8/133123_3.html

几个初期建筑相关描述:
【基地(无生产行为，有升级行为)】
01.当0级，则无法使用【工坊】和【弓铺】，【原始人篝火】无法运作：投掷?金币 => 1级别
02.当1级，则可以使用【工坊】和【弓铺】，【原始人篝火】可以运作：投掷?金币 => 2级别

【原始人篝火(生产【原始人】，无升级行为)】
00.如若【原始人篝火】无法运作，则无法进行下面的步骤(只能看到的模型)
01.每？秒钟生产一个【原始人】，直至【原始人】数量到定制上限
02.【原始人AI】：围绕篝火随机点行走，随机祈祷，视野内寻找金币】，当【吃到一个金币】，则立刻原地销毁该【原始人】，新生产一个【村民】
03.【村民AI】：如若有【全局工种指令】，则走向它的发生地；否则走向基地。

【弓铺(生产【弓箭手】)，无升级行为】
00.如若【弓铺】无法使用，则无法进行下面的步骤(只能看到的模型)
01.每投掷?金币则存储一个【生产弓箭手指令】(会累积到【全局工种指令列表】)
02.每当【村民】消化掉一个【生产弓箭手指令】，则生产一个【弓箭手】
03.【弓箭手AI】：待定...

【工坊(生产【工人】)，无升级行为】
00.如若【工坊】无法使用，无法进行下面的步骤(只能看到的模型)
01.每投掷?金币则存储一个【生产工人指令】(会累积到【全局工种指令列表】)
02.每当【村民】消化掉一个【生产工人指令】，则生产一个【工人】
03.【工人AI】：待定...



一些命名前缀化处理:
Building:
F_Homeland.cs
F_PrimitivemanFactory.cs
F_HammermanFactory.cs
F_BowmanFactory.cs
F_BowmanTower.cs
F_Wall.cs
F_Tree.cs

Character:
Player.cs
F_Primitiveman.cs
F_Villager.cs
F_Hammerman.cs
F_Bowman.cs





1.建筑底层行为拆分：
   所有建筑的公共行为：投币，需要各自延伸出具体行为，如下
   基地（投币【升级】）
   原始人篝火（自行【生产原始人】）
   弓箭铺（投币增加【生产弓箭手指令】）
   工人铺（投币增加【生产工人指令】）
   城墙（投币【升级】，需要工人建造）
   弓箭塔（投币【升级】）
   树（投币增加【砍树指令】）
   农田（？？？？）	
   神庙（投币增加【？？？工种血量】）	


每一个建筑（起始0级）：
01.【升到下一级所需金币】列表（例如包含0级一共3级：5->8）
02.【每一级的血量】列表（例如包含0级一共3级：10->15->20）
03.固定一个升级过程CD秒数（即工人锤动作播放时长）

弓箭手的巡逻点 等于【自己同侧城墙的巡逻点总和】


工人指令：01.修补建筑  02.升级建筑


01.AI状态机只负责巡逻(与指令之间属于互斥)
02.指令流程: 
    A: IBuilding发出指令 -> 指令缓存器存储它 -> 直接找到目标Char(或者在之后的触发事件中找到目标Char) -> 传递给目标Char -> 从指令缓存器删除它
    B: 目标Char接收到指令 -> 走向目标建筑且关闭AI状态机

夜间：
01.TryLinkOrder2TargetAIChar 直接返回
02.InterupptConnectAIActionOrder所有工人
03.或者夜间不需要【让所有工种回家】？？？ 很纠结，因为NewLand就是这样。






/AddMoney 7
/AddHammerman 1
/AddBowman 1
/DamageWall 1
/ReviveWall
/IBaseAIActionOrder.DebugPrint
/F_HammermanFactory.InterruptConnectAIActionOrder
/DebugSet_OnIsDayOrNightChg 1
/AddMonster 1
/Attack
/Run 1
/DebugDead


1.5.白天黑夜关联行为逻辑：？？？

夜间：Minos_AIDecisionGameDateChanged 昼夜变更只会交替触发
	强行在夜间调用[基类.InterruptConnectAIActionOrder]:
	A.工人->关闭协同+返还Order
	B.弓箭手->寻路到指定点+不再打兔子+原地防御

如何限制弓箭手只待在墙内??????
    先使用一种【弓箭手白天黑夜转化AI的方案】：
    01.->白天，移除当下巡逻点，使用【Homeland】防御巡逻点，即可以走出基地打猎的路径，且AI机上限制它只能侦测New_Rabbit
    02.->夜间，移除当下巡逻点，使用【Wall】防御蹲点，让AIBrain结束当前State，跳转到初始State，且AI机上限制它只能侦测New_Enemies



2.工人行为（建造过程很多疑惑，如何定义建筑的状态）
 工人建造建筑(城墙，塔)：过程中，可否被打断。【猜测：不可打断，即被攻击不掉血】
 工人修补建筑(城墙，塔)过程中，可否被打断。【猜测：可打断，即被攻击不掉血】



3.我方工种捡金币：和主角足够近，会尝试扔金币，且不会发生拾取，与它原来的AI行为完全不冲突。
4.怪物战斗：目标列表(墙、弓箭塔)取最近者，攻击它。




01.MoneyCoinBar 抬高，左偏移，延迟显示
02.弓箭塔（没人，有血条），墙（有血条），打成死亡状态，直接回到0级。
02.尝试添加Watch状态(Patrol有走动)
03.怪物巢穴刷怪时间点，直接晚上到达时出发。
04.怪物巢穴刷新表格：
05.农民 开耕和收耕（任意农民可以触发）。
06.时间添加到冬天（农田不能开耕）。





农田的细节展开一下：
01.基地升到4级，镰刀工厂开启(投币后增加农民指令)，农田开启(投币后增加农民耕种指令)
02.每一个农田只能被一个农民耕种，农田收成CD计数，农田对应的农民(即关联耕种关系的农民)，白天去耕种，晚上让农田CD计数加一再回城，在白天开始耕种且计数已达到3之时，则农田扔出4金币。
03.有耕种计数的【早上来临之际】，农田发出【农民耕种指令】(冬季则失效)



胜利、暂停
商人AI细节：
祭坛细节：

去掉弓箭塔站立人物
去掉商人

01.人物模型逻辑分离！(每一种人物模型预计是不会更换，直接使用一个独有的)
02.弓箭手：最左。最右 墙（驻扎），巡逻点连接。
03.雕像升级三次，次数套进属性
	我方NPC：
	弓箭手： 命中率 、基础伤害、
	农民：收成加成
	骑士：血量、攻击力
	base+add
04.骑士角色（原地、组队指令：无视白天夜晚）
05.夜间回城跑。

满额才能征召组队
1骑士 +  2近战战士A + 4弓箭手



BehaviorDesign翻新AI：
兔子，野人，村民，弓箭手，锤子工人，农民，
预计加入通用State：ShareInt
Idle，NightDefense




Minos_DamageOnTouch : HitRate
Minos_ProjectileWeapon : SpawnProjectile














旗子建筑
1骑士（必须）+4弓箭手












E_MonsterNear
E_MonsterFar
E_BossNear
E_BossFar

发生

01.碰撞矩阵不勾选，Trigger勾选随意，则穿透，无代码触发嵌入
02.碰撞矩阵勾选，Trigger勾选，则穿透，有代码触发嵌入
03.碰撞矩阵勾选，Trigger无勾选，则无穿透，无代码触发嵌入



Anim@Orc Idle

